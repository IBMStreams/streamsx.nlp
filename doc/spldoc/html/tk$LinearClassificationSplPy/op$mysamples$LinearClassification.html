<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Operator LinearClassification"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_operator"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Operator LinearClassification</title>
</head>
<body id="spldoc_operator">


<h1 class="title topictitle1">Operator <tt class="ph tt">LinearClassification</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Toolkits</a> &gt; <a class="xref" href="tk$LinearClassificationSplPy.html">LinearClassificationSplPy 1.0.0</a> &gt; <a class="xref" href="ns$mysamples.html">mysamples</a> &gt; LinearClassification</p>

</div>

<div class="section splprimop">
  <embed class="image" src="../../image/tk$LinearClassificationSplPy/op$mysamples$LinearClassification.svg" width="872" height="112"/>
</div>

<div class="section">

<p class="p">Class that represents the SPL classificarion operator
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Python
</h2>

<div class="p">
<pre class="pre codeblock">
class LinearClassification:
    "Class that represents the SPL classificarion operator"
    def __init__(self, verbose=""):
        self.verbose_ = verbose
        self.corpus = []
        self.classes = []
        if (self.verbose_):
            print("LinearClassification.__init__ verbose="+self.verbose_)

    def __call__(self, *tuple):
        if (tuple[0] == "True"):
            if (self.verbose_):
                print ("LinearClassification.__call__ Training corpus="+tuple[1]+" classes="+tuple[2])
            self.corpus.append(tuple[1])
            self.classes.append(tuple[2])
        else:
            if (tuple[4] == "True"):
                if (self.verbose_):
                    print ("LinearClassification.__call__ Training End")
                self.vectorizer = TfidfVectorizer(lowercase=False, ngram_range=(1, 3)) # From Sklearn sklearn.feature_extraction.text.TfidfVectorizer
                self.vectorizer.fit(self.corpus) # train model
                self.corpus_matrix = self.vectorizer.transform(self.corpus) # sparce matrix of training documents
                self.model = LinearSVC()
                self.model.fit(self.corpus_matrix, self.classes) # train model
                # end of training
                self.corpus = []
                self.classes = []
            else:
                s = tuple[3];
                if (self.verbose_):
                    print ("LinearClassification.__call__ Processing ln="+s)
                if ( s != ''):
                    txt = s.rstrip('\n');
                    test_doc = [txt]
                    test_matrix  = self.vectorizer.transform(test_doc)  # sparce matrix of test document
                    pred = self.model.predict(test_matrix)
                    decision = self.model.decision_function(test_matrix)
                    classes = self.model.classes_
                    #outstring = str(pred) + '|*|' + str(decision) + '|*|' + str(classes)
                    #print type(pred), type(decision), type(classes)
                    #print(outstring)
                    return (pred, decision, classes)
</pre>


</div>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Summary</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Ports</dt>

  <dd class="dd">This operator has 1 input port and 1 output port.</dd>

 
 
  <dt class="dt dlterm">Windowing</dt>

  <dd class="dd">This operator does not accept any windowing configurations.</dd>

 
 
  <dt class="dt dlterm">Parameters</dt>

  <dd class="dd">This operator supports 1 parameter.
<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__verbose">verbose</a>

</p>
</dd>

 
 
  <dt class="dt dlterm">Metrics</dt>

  <dd class="dd">This operator does not report any metrics.</dd>

 
</dl>
</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Properties</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Implementation</dt>

  <dd class="dd">C++</dd>

 
 
  <dt class="dt dlterm"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__providessinglethreadedexecutioncontext">Threading</a></dt>

  <dd class="dd"><tt class="ph tt">Always</tt> - Operator always provides a single threaded execution context.</dd>

 
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__input_port_set">Input Ports</a></strong></p>
<dl class="dl">
  
   <dt class="dt dlterm">Ports (0)</dt>

   <dd class="dd">
<p class="p">__SPLPY__INPORT_0_DESCRIPTION__SPLPY__
</p>

   <dl class="dl">
    
      <dt class="dt dlterm">Properties</dt>

      <dd class="dd">   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__input_port_set__optional">Optional</a>: false
     </li>

   </ul>

   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__input_port_set__controlport">ControlPort</a>: false
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__input_port_set__tuplemutationallowed">TupleMutationAllowed</a>: false
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__input_port_set__windowingmode">WindowingMode</a>: NonWindowed
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__input_port_set__windowpunctuationinputmode">WindowPunctuationInputMode</a>: Oblivious
     </li>

   </ul>

      </dd>
    
   </dl>

   <p class="p"/>
   </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set">Output Ports</a></strong></p>
<dl class="dl">
  
     <dt class="dt dlterm">Assignments</dt>

     <dd class="dd">This operator does not allow assignments to output attributes.</dd>

  
</dl>

 <dl class="dl">
  
   <dt class="dt dlterm">Ports (0)</dt>

   <dd class="dd">
    <p class="p"/>

    <dl class="dl">
     
      <dt class="dt dlterm">Properties</dt>

      <dd class="dd">   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__optional">Optional</a>: false
     </li>

   </ul>

   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__tuplemutationallowed">TupleMutationAllowed</a>: true
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__windowpunctuationoutputmode">WindowPunctuationOutputMode</a>: Preserving
     </li>

   </ul>

</dd>
     
    </dl>

    <p class="p"/>

   </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters">Parameters</a></strong></p>
This operator supports 1 parameter.
<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__verbose">verbose</a>

</p>
<dl class="dl">
  
     <dt class="dt dlterm"><a name="spldoc_operator__parameter__verbose"><!-- --></a><tt class="ph tt">verbose</tt></dt>

     <dd class="dd">
  <dl class="dl">
    
     <dt class="dt dlterm">Properties</dt>

     <dd class="dd">   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__expressionmode">ExpressionMode</a>: AttributeFree
     </li>

   </ul>

     <p class="p"/>
     </dd>

    
  </dl>

     </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies">Libraries</a></strong></p>
<dl class="dl">
 
  <dt class="dt dlterm"><tt class="ph tt">SPLPY header</tt>  </dt>

<dd class="dd"/>
  <dd class="dd"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies__managedlibrary__includepath">Include Path</a>: <tt class="ph tt">../../opt/.__splpy/include</tt></dd>

 
 
  <dt class="dt dlterm"><tt class="ph tt">Python libraries.</tt>  </dt>

<dd class="dd"/>
  <dd class="dd"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies__managedlibrary__command">Command</a>: ../../opt/.__splpy/common/pyversion3.sh
  </dd>

 
</dl>

</div>

</div>


</body>
</html>